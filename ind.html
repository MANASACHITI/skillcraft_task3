<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Quiz Game Application</title>
  <style>
    :root{
      --bg:#0f172a; /* slate-900 */
      --card:#111827ee; /* gray-900 */
      --text:#e5e7eb; /* gray-200 */
      --muted:#9ca3af; /* gray-400 */
      --accent:#22d3ee; /* cyan-400 */
      --accent2:#a78bfa; /* violet-400 */
      --success:#10b981;/* green-500 */
      --danger:#ef4444;/* red-500 */
    }
    *{box-sizing:border-box}
    body{
      margin:0; font-family: system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, "Helvetica Neue", Arial, "Apple Color Emoji", "Segoe UI Emoji";
      background: radial-gradient(1200px 600px at 20% 0%, #111827 0%, var(--bg) 60%),
                  radial-gradient(1000px 500px at 100% 100%, #111827 0%, var(--bg) 60%);
      color:var(--text);
      min-height:100dvh; display:flex; align-items:center; justify-content:center; padding:24px;
    }
    .app{width:min(900px,100%);}
    .card{
      background:linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02));
      backdrop-filter: blur(10px);
      border:1px solid rgba(255,255,255,.08);
      border-radius:20px; padding:28px; box-shadow: 0 10px 30px rgba(0,0,0,.35);
    }
    h1{font-size:clamp(24px,3.2vw,36px); margin:0 0 8px}
    p.lead{color:var(--muted); margin-top:0}
    .row{display:flex; gap:16px; align-items:center; justify-content:space-between}
    .btn{border:none; padding:12px 18px; border-radius:12px; font-weight:600; cursor:pointer; transition:.2s transform, .2s opacity, .2s box-shadow;}
    .btn:hover{transform:translateY(-1px)}
    .btn:active{transform:translateY(0)}
    .btn-primary{background:linear-gradient(135deg,var(--accent), var(--accent2)); color:#0b1020}
    .btn-secondary{background:#1f2937; color:var(--text); border:1px solid rgba(255,255,255,.08)}
    .btn-ghost{background:transparent; color:var(--muted)}
    .hidden{display:none}
    .progress{height:8px; background:#1f2937; border-radius:999px; overflow:hidden; margin:18px 0 10px}
    .progress > div{height:100%; width:0; background:linear-gradient(90deg,var(--accent),var(--accent2)); transition:width .3s ease}
    .q-card{margin-top:18px; background:#0b1224; border:1px solid rgba(255,255,255,.06); border-radius:16px; padding:18px}
    .q-text{font-size:18px; margin:0 0 12px}
    .options{display:grid; gap:10px}
    .option{
      display:flex; gap:10px; align-items:flex-start; background:#0f162b; border:1px solid rgba(255,255,255,.08); padding:12px; border-radius:12px; cursor:pointer;
    }
    .option input{margin-top:2px}
    .nav{display:flex; gap:10px; justify-content:space-between; margin-top:16px}
    .pill{display:inline-block; padding:6px 10px; border-radius:999px; font-size:12px; color:#0b1020; background:linear-gradient(135deg,var(--accent), var(--accent2));}
    .muted{color:var(--muted)}
    .result{
      border-left:4px solid transparent; padding-left:12px; margin:14px 0; border-radius:8px
    }
    .result.ok{border-color:var(--success)}
    .result.bad{border-color:var(--danger)}
    .answer{font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace; background:#0b1224; padding:2px 6px; border-radius:6px}
    @media (max-width:560px){ .row{flex-direction:column; align-items:flex-start}
      .nav{flex-direction:column}
    }
  </style>
</head>
<body>
  <div class="app">
    <div class="card" id="screen-start">
      <h1>Quiz Game Application</h1>
      <p class="lead">Interactive quiz with <span class="pill">Single Select</span>, <span class="pill">Multi Select</span>, and <span class="pill">Fill in the Blanks</span>. Get your score and review answers at the end.</p>
      <div class="row">
        <div class="muted">Questions: <strong id="q-count"></strong></div>
        <button class="btn btn-primary" id="start-btn">Start Quiz</button>
      </div>
    </div>

    <div class="card hidden" id="screen-quiz">
      <div class="row" style="margin-bottom:6px">
        <div><strong id="counter">Question 1</strong></div>
        <div class="muted">Type: <span id="q-type"></span></div>
      </div>
      <div class="progress"><div id="bar"></div></div>
      <div class="q-card">
        <p class="q-text" id="q-text"></p>
        <div class="options" id="options"></div>
      </div>
      <div class="nav">
        <button class="btn btn-secondary" id="prev-btn">◀ Prev</button>
        <div style="flex:1"></div>
        <button class="btn btn-secondary" id="next-btn">Next ▶</button>
        <button class="btn btn-primary hidden" id="submit-btn">Submit Quiz</button>
      </div>
    </div>

    <div class="card hidden" id="screen-result">
      <h1>Results</h1>
      <p class="lead">Score: <strong id="score"></strong></p>
      <div id="review"></div>
      <div class="nav">
        <button class="btn btn-secondary" id="restart-btn">Restart</button>
        <button class="btn btn-ghost" id="print-btn">Print/Save PDF</button>
      </div>
    </div>
  </div>

  <script>
    // --- Quiz data ---
    // type: 'single' | 'multi' | 'text'
    const QUIZ = [
      {
        type: 'single',
        question: 'What is the capital of France?',
        options: ['Berlin', 'Madrid', 'Paris', 'Rome'],
        answer: [2], // index starts at 0
      },
      {
        type: 'multi',
        question: 'Which of the following are programming languages?',
        options: ['Python', 'HTML', 'Java', 'CSS'],
        answer: [0, 2],
      },
      {
        type: 'text',
        question: 'Fill in the blank: The process of finding and fixing errors is called _____.',
        answerText: 'debugging',
        placeholder: 'Your answer',
      },
      {
        type: 'single',
        question: 'HTML stands for?',
        options: ['Hyperlinks and Text Markup Language', 'Hyper Text Markup Language', 'Home Tool Markup Language', 'Hyper Tool Multi Language'],
        answer: [1],
      },
      {
        type: 'multi',
        question: 'Select all front-end technologies.',
        options: ['CSS', 'Django', 'React', 'Flask'],
        answer: [0,2],
      },
    ];

    // --- State ---
    const state = {
      idx: 0,
      responses: Array(QUIZ.length).fill(null), // store selections
    };

    // --- Elements ---
    const el = (id) => document.getElementById(id);
    const startScreen = el('screen-start');
    const quizScreen = el('screen-quiz');
    const resultScreen = el('screen-result');

    // Init counts
    el('q-count').textContent = QUIZ.length;

    // Start
    el('start-btn').addEventListener('click', () => {
      startScreen.classList.add('hidden');
      quizScreen.classList.remove('hidden');
      render();
    });

    el('prev-btn').addEventListener('click', () => { if (state.idx>0){ saveCurrent(); state.idx--; render(); }});
    el('next-btn').addEventListener('click', () => { if (state.idx<QUIZ.length-1){ saveCurrent(); state.idx++; render(); }});
    el('submit-btn').addEventListener('click', () => { saveCurrent(); showResults(); });
    el('restart-btn').addEventListener('click', () => { location.reload(); });
    el('print-btn').addEventListener('click', () => { window.print(); });

    function render(){
      const q = QUIZ[state.idx];
      el('counter').textContent = `Question ${state.idx+1} of ${QUIZ.length}`;
      el('q-type').textContent = q.type === 'single' ? 'Single Select' : q.type === 'multi' ? 'Multi Select' : 'Fill in the Blank';
      el('q-text').textContent = q.question;
      const options = el('options');
      options.innerHTML = '';

      // progress
      el('bar').style.width = `${((state.idx)/ (QUIZ.length-1)) * 100}%`;

      if (q.type === 'single' || q.type === 'multi'){
        const inputType = q.type === 'single' ? 'radio' : 'checkbox';
        q.options.forEach((opt, i) => {
          const id = `opt-${state.idx}-${i}`;
          const wrap = document.createElement('label');
          wrap.className = 'option';
          wrap.setAttribute('for', id);
          wrap.innerHTML = `<input id="${id}" name="q-${state.idx}" type="${inputType}" value="${i}" /> <span>${opt}</span>`;
          options.appendChild(wrap);
        });
        // restore previous
        const resp = state.responses[state.idx];
        if (resp){
          [...options.querySelectorAll('input')].forEach(inp => {
            if (Array.isArray(resp)){
              inp.checked = resp.includes(Number(inp.value));
            } else {
              inp.checked = Number(inp.value) === resp;
            }
          });
        }
      } else if (q.type === 'text'){
        const input = document.createElement('input');
        input.type = 'text';
        input.placeholder = q.placeholder || 'Type your answer';
        input.className = 'option';
        input.style.padding = '12px 14px';
        input.style.width = '100%';
        options.appendChild(input);
        if (state.responses[state.idx]) input.value = state.responses[state.idx];
      }

      // nav button visibility
      el('prev-btn').disabled = state.idx === 0;
      el('next-btn').classList.toggle('hidden', state.idx === QUIZ.length-1);
      el('submit-btn').classList.toggle('hidden', state.idx !== QUIZ.length-1);
    }

    function saveCurrent(){
      const q = QUIZ[state.idx];
      const options = el('options');
      if (q.type === 'single'){
        const selected = options.querySelector('input[type=radio]:checked');
        state.responses[state.idx] = selected ? Number(selected.value) : null;
      } else if (q.type === 'multi'){
        const selected = [...options.querySelectorAll('input[type=checkbox]:checked')].map(x => Number(x.value));
        state.responses[state.idx] = selected.length ? selected : null;
      } else {
        const val = options.querySelector('input')?.value.trim() || '';
        state.responses[state.idx] = val || null;
      }
    }

    function arraysEqual(a,b){
      if (!Array.isArray(a) || !Array.isArray(b)) return false;
      if (a.length !== b.length) return false;
      const sa = [...a].sort();
      const sb = [...b].sort();
      return sa.every((v,i)=> v===sb[i]);
    }

    function showResults(){
      quizScreen.classList.add('hidden');
      resultScreen.classList.remove('hidden');

      let score = 0;
      const review = el('review');
      review.innerHTML = '';

      QUIZ.forEach((q, i) => {
        let correct = false, your, expected;
        if (q.type === 'single'){
          correct = state.responses[i] !== null && arraysEqual([state.responses[i]], q.answer);
          your = state.responses[i] !== null ? q.options[state.responses[i]] : '—';
          expected = q.options[q.answer[0]];
        } else if (q.type === 'multi'){
          correct = state.responses[i] && arraysEqual(state.responses[i], q.answer);
          your = (state.responses[i]||[]).map(idx => q.options[idx]).join(', ') || '—';
          expected = q.answer.map(idx => q.options[idx]).join(', ');
        } else {
          const yourText = (state.responses[i]||'').toString().trim().toLowerCase();
          const ansText = q.answerText.toString().trim().toLowerCase();
          correct = yourText && yourText === ansText;
          your = state.responses[i] || '—';
          expected = q.answerText;
        }
        if (correct) score++;

        const div = document.createElement('div');
        div.className = `result ${correct ? 'ok' : 'bad'}`;
        div.innerHTML = `
          <div><strong>Q${i+1}.</strong> ${q.question}</div>
          <div class="muted">Your answer: <span class="answer">${your}</span></div>
          <div class="muted">Correct answer: <span class="answer">${expected}</span></div>
        `;
        review.appendChild(div);
      });

      el('score').textContent = `${score} / ${QUIZ.length}`;
      window.scrollTo({top:0, behavior:'smooth'});
    }
  </script>
</body>
</html>
